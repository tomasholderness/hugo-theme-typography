{{ define "main" }}
<h1 class="title">{{ .Title | markdownify }}</h1>
<div style="height: 0rem;"></div>
{{ if .Site.Params.intro }}
    {{ if .Site.Params.introtag }}
        <div class="sidenote" style="margin-top: 1rem;">{{ .Site.Params.introtag }}</div>
    {{ end }}

    <p class="intro-text">{{ .Site.Params.intro | markdownify }}</p>

    {{ if .Site.Params.introimg }}
    {{ $filter := images.Grayscale }}
        {{with resources.Get .Site.Params.introimg}}
            {{ with . | images.Filter $filter }}
                <div class="intro-img"><img src="{{ .RelPermalink }}"></div>
            {{ end }}
        {{ end }}
    {{ end }}
{{ end }}

<div>
    <h2>POSTS</h2>
    {{ range $k, $v := where (where .Site.RegularPages "Type" "blog") "File.Dir" "blog/" }}
        {{ if .Date }}
            {{ if not $k }}
                <div class="sidenote" style="margin-top: 0rem;">{{ .Date.Format "Jan 2006" }}</div>
            {{ else }}
                <div class="sidenote">{{ .Date.Format "Jan 2006" }}</div>
            {{ end }}
            {{ else }}
            {{ if not $k }}
                <div class="sidenote" style="margin-top: 0.5rem;">no date</div>
            {{ else }}
                <div class="sidenote">no date</div>
            {{ end }}
        {{ end }}
        <h3 class="list"><a class="title" href="{{ .Permalink }}">{{ .Title }}</a></h3>
    {{ end }}
</div>
{{ if .Site.Params.social }}
    <div class="sidenote">Socials</div>
    <div class="social-icons" style="margin-top: 0.5rem;">
        {{ if eq .Site.Params.iconsource "simple-icons" }}
            {{ with .Site.Params.social }}
                {{ range sort . "weight" }}
                    <a href="{{ .url }}" {{ .html_attributes | safeHTMLAttr }}>
                        <img class="icon" height="28" width="28" src="https://cdn.simpleicons.org/{{ .icon }}/444"/>
                    </a>
                {{ end }}
            {{ end }}
        {{ else if eq .Site.Params.iconsource "fontawesome" }}
            {{ with .Site.Params.social }}
                {{ range sort . "weight" }}
                    <a href="{{ .url }}" {{ .html_attributes | safeHTMLAttr }}>
                        <i class="{{ .icon }}"></i>
                    </a>
                {{ end }}
            {{ end }}
        {{ else }}
            {{ with .Site.Params.social }}
                {{ range sort . "weight" }}
                    <a href="{{ .url }}" {{ .html_attributes | safeHTMLAttr }}>
                        <i data-feather="{{ .icon }}" style="margin-right: 0.5rem;"></i>
                    </a>
                {{ end }}
            {{ end }}
        {{ end }}
    {{ end }}
</div>
{{ end }}
